[ ca ]
default_ca = CA_default
 
[ CA_default ]
# Directory and file locations.
dir                             = /opt/tls/intermediate
certs                           = $dir/certs
crl_dir                         = $dir/crl
new_certs_dir                   = $dir/certs
database                        = $dir/index.txt
serial                          = $dir/serial
RANDFILE                        = $dir/private/.rand
copy_extensions                 = copy
 
# The root key and root certificate.
private_key                     = $dir/private/intermediate.key
certificate                     = $dir/certs/intermediate.crt
 
# For certificate revocation lists.
crlnumber                       = $dir/crlnumber
crl                             = $dir/crl/intermediate.crl
crl_extensions                  = crl_ext
default_crl_days                = 180
 
# SHA-1 is deprecated, so use SHA-2 or SHA-3 instead.
default_md                      = sha512
 
name_opt                        = ca_default
cert_opt                        = ca_default
default_days                    = 365
preserve                        = no
policy                          = policy_supply

[ policy_supply ]
# Allow the intermediate CA to sign a more diverse range of certificates.
# See the POLICY FORMAT section of the `ca` man page.
countryName                     = match
stateOrProvinceName             = match
localityName                    = match
organizationName                = optional
organizationalUnitName          = optional
commonName                      = supplied
emailAddress                    = optional

[ req ]
# Options for the `req` tool (`man req`).
default_bits                    = 4096
distinguished_name              = req_distinguished_name
string_mask                     = utf8only
 
# SHA-1 is deprecated, so use SHA-2 or SHA-3 instead.
default_md                      = sha512
 
# Extension to add when the -x509 option is used.
x509_extensions                 = server_cert
 
[ req_distinguished_name ]
countryName                     = Country Name (2 letter code)
stateOrProvinceName             = State or Province Name
localityName                    = Locality Name
0.organizationName              = Organization Name
organizationalUnitName          = Organizational Unit Name
commonName                      = Common Name
emailAddress                    = Email Address
 
# Optionally, specify some defaults.
countryName_default             = US
stateOrProvinceName_default     = New York
localityName_default            = Buffalo
0.organizationName_default      = CWSNA
organizationalUnitName_default  = RD
emailAddress_default            = kmhuntly@caspersbox.com
 
[ server_cert ]
# Extensions for server certificates (`man x509v3_config`).
basicConstraints                = CA:FALSE
nsCertType                      = server
nsComment                       = "Grilled Cheese Generated Server Certificate"
subjectKeyIdentifier            = hash
authorityKeyIdentifier          = keyid,issuer:always
keyUsage                        = critical, digitalSignature, keyEncipherment
extendedKeyUsage                = serverAuth
crlDistributionPoints           = @crl_info
authorityInfoAccess             = @ocsp_info
subjectAltName                  = @alt_names

[ usr_cert ]
# Extensions for client certificates (`man x509v3_config`).
basicConstraints                = CA:FALSE
nsCertType                      = client, email
nsComment                       = "Grilled Cheese Generated Client Certificate"
subjectKeyIdentifier            = hash
authorityKeyIdentifier          = keyid,issuer
keyUsage                        = critical, nonRepudiation, digitalSignature, keyEncipherment
extendedKeyUsage                = clientAuth, emailProtection

[alt_names]
# DNS.0 = 

[ crl_ext ]
# Extension for CRLs (`man x509v3_config`).
authorityKeyIdentifier          = keyid:always
 
[ ocsp ]
# Extension for OCSP signing certificates (`man ocsp`).
basicConstraints                = CA:FALSE
subjectKeyIdentifier            = hash
authorityKeyIdentifier          = keyid,issuer
keyUsage                        = critical, digitalSignature
extendedKeyUsage                = critical, OCSPSigning
 
[crl_info]
URI.0                           = http://localhost/root.crt
 
[ocsp_info]
caIssuers;URI.0                 = http://localhost/root.crt
OCSP;URI.0                      = http://localhost/
